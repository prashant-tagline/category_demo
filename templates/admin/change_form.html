{% extends "admin/change_form.html" %} {% load static %} {% block extrahead %}
{{ block.super }}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        // ajax to list only parent categories while creating sub categories
        $.ajax(
            {
                type: "GET",
                url: "/getcategory",
                success: function (data) {
                    var options = '<option value="">---------</option>';
                    for (var i = 0; i < data.length; i++) {
                        options +=
                            '<option value="' + data[i].id + '">' + data[i].category + "</option>";
                    }
                    // inspect html to check id of subcategory select dropdown.
                    $("select#id_parent_category").html(options);
                }
            })

        // ajax to list only sub-categories in items 
        $.ajax(
            {
                type: "GET",
                url: "/getsubcategory",
                success: function (data) {
                    var options = '<option value="">---------</option>';
                    for (var i = 0; i < data.length; i++) {
                        options +=
                            '<option value="' + data[i].id + '">' + data[i].category + "</option>";
                    }
                    // inspect html to check id of subcategory select dropdown.
                    $("select#id_sub_category").html(options);
                }
            })
    });
        
</script>
{% endblock %}